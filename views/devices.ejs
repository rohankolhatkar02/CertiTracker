<!DOCTYPE html>
<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8">
    <title>Inspirit Vision-Certifications</title>
  </head>
  <style>
    body {
  background-color: #ffffff;
}

    .excel-table {
  border-collapse: collapse;
  font-family: Arial, sans-serif;
  font-size: 14px;
  justify-content: center;
  align-items: center;  
}

.excel-table td, .excel-table th {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}

.excel-table th {
  background-color: #7800ce;
  color: white;
  font-weight: bold;
}

.excel-table tr:nth-child(even) {
  background-color: #f2f2f2;
}
input[type="submit"], input[type="reset"]  {
  background-color: #7800ce;
  border: none;
  color: white;
  padding: 10px 18px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 12px;
  font-weight: bold;
  border-radius: 5px;
  cursor: pointer;
 
}

input[type="submit"]:hover,
input[type="reset"]:hover {
  background-color: #7a1ff3;
}
.clickable-cell:hover {
  cursor: pointer;
}

  </style>
  <body>
    <h1><u>Inspirit Vision-Employee Certifications</u></h1>
    <table class="excel-table">
      <tr>
        <th>Employee ID</th>
        <th>Name</th>
        <th>Certification</th>
        <th>Planned</th>
        <th>Registered</th>
        <th>Cleared</th>
        <th>Completion Date</th>
        <th>Comments</th>
      </tr>
      <% var group = {}; %>
      <% devices.forEach(function(device) {
            if (!group[device.employeeId]) {
                group[device.employeeId] = [];
            }
            group[device.employeeId].push(device);
         });
         Object.keys(group).forEach(function(employeeId) { %>
         <tr>
            <td rowspan="<%= group[employeeId].length %>"><%= employeeId %></td>
            <% group[employeeId].forEach(function(device, index) { %>
                <% if (index > 0) { %>
                <tr>
                <% } %>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><%= device.name %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><%= device.certification %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><% if (device.planned) { %><%= new Date(device.planned).toLocaleDateString() %><% } else { %>-<% } %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><%= device.registered %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><%= device.cleared %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><% if (device.completed) { %><%= new Date(device.completed).toLocaleDateString() %><% } else { %>-<% } %></td>
                <td class="clickable-cell" data-deviceid="<%= device._id %>"><%= device.comments %></td>
                <% if (index > 0) { %>
                </tr>
                <% } %>
            <% }); %>
         </tr>
      <% }); %>
    </table>
    
    <script>
      const clickableCells = document.querySelectorAll(".clickable-cell");
      clickableCells.forEach(cell => {
        cell.addEventListener("click", () => {
          const deviceId = cell.getAttribute("data-deviceid");
          window.location.href = `/devices/${deviceId}`;
        });
      });
    </script>
    

    
    
    <!--FORM FOR ADDITION-->

    <h1><u>Add/Update Certifications</u></h1> 
    <form action="/add" method="POST">
      <table class="excel-table">
        <tr>
          <th>Name</th>
          <th>Certification</th>
          <th>Planned</th>
          <th>Registered</th>
          <th>Cleared</th>
          <th>Completed</th>
          <th>Comments</th>
        </tr>
        <tr>
          <td><input type="text" name="name" /></td>
          <td><input type="text" name="certification" /></td>
          <td><input type="date" name="planned" /></td>
          <td>
            <select name="registered">
              <option value="">-Select-</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </td>
          <td>
            <select name="cleared">
              <option value="">-Select-</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </td>
          <td><input type="date" name="completed" /></td>
          <td><input type="text" name="comments" /></td>
        </tr>
      </table>
      <br>
      <input type="submit" value="Add Records" formaction="/add"/>
      <input type="submit" value="Update Records" formaction="/update"/>
      <input type="reset" value="Reset" />
    </form>
    
  <!-- FORM FOR UPDATION -->
  <!-- <h1><u>Update Certifications</u></h1> 
  <form action="/update" method="POST">
    <table class="excel-table">
      <tr>
        <th>Name</th>
        <th>Certification</th>
        <th>Planned</th>
        <th>Registered</th>
        <th>Cleared</th>
        <th>Completed</th>
        <th>Comments</th>
      </tr>
      <tr>
        <td><input type="text" name="name" /></td>
        <td><input type="text" name="certification" /></td>
        <td><input type="date" name="planned" /></td>
        <td><input type="text" name="registered" /></td>
        <td><input type="text" name="cleared" /></td>
        <td><input type="date" name="completed" /></td>
        <td><input type="text" name="comments" /></td>
      </tr>
    </table>
    <br>
    <input type="submit" value="Submit" />
    <input type="reset" value="Reset" />
  </form> -->

   <!-- FORM FOR DELETION -->
  <h1><u>Delete Certifications</u></h1> 
   <form action="/delete" method="POST">        
     <table class="excel-table">
       <tr>
         <th>Name</th>
         <th>Certification</th>
       </tr>
       <tr>
         <td><input type="text" name="name" /></td>
         <td><input type="text" name="certification" /></td>
       </tr>
     </table>
     <br>
     <input type="submit" value="Delete Records">
   </form> 

   <!--HTML FORM FOR REGISTERING USERS-->
   <h1><u>Register a new user</u></h1>
   <form method="POST" action="/register">
     <table class="excel-table">
       <tr>
         <td><label for="email">Email:</label></td>
         <td><input type="email" id="email" name="email" autocomplete="off" required="true" placeholder="Enter your email"></td>
       </tr>
       <tr>
         <td><label for="password">Password:</label></td>
         <td><input type="password" id="password" name="password" required="true"></td>
       </tr>
     </table>
     <br>
     <input type="submit" value="Register">
   </form>
   
  </body>
</html>
